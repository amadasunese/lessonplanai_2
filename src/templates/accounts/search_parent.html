{% extends '_base.html' %}

{% block content %}
<div class="container mt-4">
    <!-- Heading, Form, and Results are all inside the same column width for consistency -->
    <div class="row justify-content-center">
        <div class="col-md-8">
            <h2 class="mb-4">Search for Parents by Subject</h2>

            <!-- Search Form -->
            <form method="POST" class="form-inline mb-4 justify-content-center">
                {{ form.hidden_tag() }}
                <div class="form-group mr-2">
                    {{ form.subject_area.label(class="sr-only") }}
                    {{ form.subject_area(class="form-control", placeholder="Subject Area") }}
                </div>
                <div class="form-group">
                    {{ form.submit(class="btn btn-primary") }}
                </div>
            </form>

            <!-- Check if 'results' is defined to determine if a search was performed -->
{% if results is defined %}
    <h3>Search Results for "{{ subject_area }}"</h3>

    {% if results %}
        <table class="table">
            <thead>
                <tr>
                    <th>Full Name</th>
                    <th>Subject Area</th>
                    <th>Contact Phone Number</th>
                    <th>State of Residence</th>
                    <th>LGA/Town of Residence</th>
                </tr>
            </thead>
            <tbody>
                {% for result in results %}
                    <tr>
                        <td>{{ result.full_name }}</td>
                        <td>{{ result.subject_area }}</td>
                        <td>{{ result.phone_number }}</td>
                        <td>{{ result.state }}</td>
                        <td>{{ result.local_government }}</td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p>No results found.</p>
    {% endif %}
{% endif %}

        </div>
    </div>
</div>
{% endblock %}
